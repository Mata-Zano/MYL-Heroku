<!DOCTYPE html>
{% extends 'vendedorAppTemplates/navVendedor.html' %} 
{% load static %}

<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css"
      rel="stylesheet"
    />
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css"
      rel="stylesheet"
      integrity="sha384-T3c6CoIi6uLrA9TneNEoa7RxnatzjcDSCmG1MXxSR1GAsXEV/Dwwykc2MPK8M2HN"
      crossorigin="anonymous"
    />
    <title>Cátalogo</title>

    {% block contentVendedor %}
  </head>

  <body class="container text-center">
    <main>
      <div class="row text-center">
        <h2>{{ titulo }}</h2>
      </div>
      <br />
      <div class="row">
        <div class="col">
          <table class="table">
            <thead>
              <tr>
                <th scope="col">Producto</th>
                <th scope="col">Descripción del producto</th>
                <th scope="col">Cantidad</th>
                <th scope="col">Precio unitario</th>
                <th scope="col">Precio total</th>
                <th scope="col"></th>
                <th scope="col"></th>

                <th scope="col">Eliminar</th>
              </tr>
            </thead>
            {% if request.session.carrito.items %}
            <tbody>
              {% for key, value in request.session.carrito.items %}
              <tr>
                <td>{{ value.nombre }}</td>
                <td>{{ value.descripcion }}</td>
                <td>{{ value.cantidad }}</td>
                <td>{{ value.precioUnitario }}</td>
                <td>{{ value.precio }}</td>
                <td>
                  <a
                    class="btn btn-danger"
                    href="{% url 'sumarleProducto' value.producto_id %}"
                    
                  >+</a>
                </td>
                <td>
                  <a
                    class="btn btn-danger"
                    href="{% url 'restarProductoCarrito' value.producto_id %}"
                  >-</a>
                </td>

                <td>
                  <a
                    class="btn btn-danger"
                    href="{% url 'eliminarProductoCarrito' value.producto_id %}"
                    ><i class="fa-solid fa-trash"></i
                  ></a>
                </td>
              </tr>
              {% endfor %}
            </tbody>
            {% else %}
            <h4>No hay Productos agregados</h4>
            <br />
            {% endif %}
          </table>
        </div>
        <div class="col">
          <div class="card">
            <div class="card-head">
              <h5 class="card-title">Generar compra</h5>
            </div>
            <div class="card-body">
              <form action="" method="post" class="align-items-start">
                {% csrf_token %}
                <div class="form-group">
                  {{ pedidoForm.usuario.label_tag }} {{ pedidoForm.usuario }}
                  {{pedidoForm.usuario.errors }}
                </div>
                <div class="form-group">
                  {{ pedidoForm.nombre.label_tag }} {{ pedidoForm.nombre }}
                  {{pedidoForm.nombre.errors }}
                </div>
                <div class="form-group">
                  {{ pedidoForm.apellido.label_tag }} {{ pedidoForm.apellido }}
                  {{ pedidoForm.apellido.errors }}
                </div>
                <div class="form-group">
                  {{ pedidoForm.total.label_tag }} {{ pedidoForm.total }} 
                  {{ pedidoForm.total.errors }}
                </div>
                  {{ pedidoForm.estado.label_tag }} {{ pedidoForm.estado }}
                  {{pedidoForm.estado.errors }}
              </div>
                <div class="form-group">
                  {{ detalleForm.cantidad.label_tag }} {{ detalleForm.cantidad}}
                  {{ detalleForm.cantidad.errors }}
                </div>
                <div class="form-group">
                  {{ detalleForm.precio_total.label_tag }} {{detalleForm.precio_total}} 
                  {{ detalleForm.precio_total.errors }}
                </div>
                <div class="form-group">
                  <button type="submit" class="btn btn-primary">Agregar</button>
                </div>
              </form>
            </div>
          </div>
        </div>
      </div>
      <hr />
    </main>
  </body>

  {% endblock %}
</html>
